# 编写

## 目录

-   [地址空间](#地址空间)

1.  使用FAT12对软盘的映像文件进行格式化
2.  编写可执行程序（Loader），并将其拷贝到软盘映像文件中
3.  主引导程序（Boot）在文件系统中查找Loader
4.  将Loader复制到内存中，并跳转到入口处执行

# 地址空间

| 地址位置     | 名称           |
| -------- | ------------ |
| 0x7c00   | Boot引导程序     |
| 0x8000h  | FAT文件临时缓冲区   |
| 0x10000h | Loader引导加载程序 |
|          |              |

-   0x7c00

    从地址0x7c00开始的512B内存空间保存着MBR主引导扇区内的数据，即Boot引导程序。这段程序是在硬件平台上电时，由BIOS自动从存储介质中加载到物理地址0x7c00处的。这段内存空间固定留给BIOS号引导程序使用，当Boot程序执行结束后，此内存空间可另作他用。
-   0x8000h

    由于本系统的Loader引导加载程序保存在FAT12文件系统内，那么在Boot引导程序访问FAT12文件系统时就需要临时数据缓存区来保存FAT表项和目录项等数据，这里选用物理地址0x8000起始处的1KB内存空间来作为文件系统的临时数据缓存区。
-   0x10000h

    物理地址0x10000处保存着Loader引导加载程序，Boot引导程序通过搜素FAT12文件系统，将Loader引导加载程序逐个族读取到这段内存地址空间中。
