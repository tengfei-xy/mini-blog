# 13H

## 目录

-   [示例](#示例)

低级磁盘服务。

-   AH=00h复位磁盘驱动器

    DL=驱动器号，软盘：00H至7FH，硬盘80H至0FFH:&#x20;
    -   DL=00h代表第一个软盘驱动器(“driveA:” );
    -   DL=01h代表第二个软盘驱动器(“ driveB:”);
    -   DL=80h代表第一个硬盘驱动器;
    -   DL=81h代表第二个硬盘驱动器 。
    ## 示例
    复位软盘驱动器，将软盘驱动器的磁头移动至默认位置
    ```6502&#x20;assembly
    xor ah, ah
    xor dl, dl
    int 13h

    ```
-   AH=01h检查磁盘驱动器状态
-   AH=02h读扇区

    注：只能受理CHS (Cylinder/Head/Sector， 柱面/磁头/扇区) 格式的磁盘扇区号，那么必须将LBA（逻辑块寻址）格式转换为CHS格式
    -   LBA转CHS（LBA扇区号 / 每磁道扇区数）

        CH = 柱面号 = 商 >> 1 = AL >> 1 = `SHR AL, 1`

        DH = 磁头号 = 商 && 1 = AL && 1 = `AND AL, 1`

        CL = 扇区号 = 余数 + 1 = `inc AH`
    -   AL=扇区数（非0）&#x20;
    -   CH=柱面号/磁道号 的低8位;&#x20;
    -   CL=扇区号1\~63 （0\~5位），柱面号/磁道号 的高2位（6\~7位）（只对硬盘有效）
    -   DH=磁头号
    -   DL=驱动器号（如果操作的是硬盘驱动器， bit 7必须被置位）
    -   ES:BX=数据缓冲区。

AH=03h写扇区
AH=04h校验扇区
AH=05h格式化磁道
AH=08h获取驱动器参数
AH=09h初始化硬盘驱动器参数
AH=0Ch寻道
AH=0Dh复位硬盘控制器
AH=15h获取驱动器类型
AH=16h获取软驱中盘片的状态
