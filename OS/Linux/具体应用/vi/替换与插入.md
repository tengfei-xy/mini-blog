# vi替换

当前行，第一个：用new替换old

```
:s/old/new
```

当前行，所有：用new替换old


```
:s/old/new/g
```

指定行，所有，用new替换old

```
:n1,n2s/old/new/g
```

所有行，所有，用new替换old

```
:%s/old/new/g
```

# vi插入

行首插入，xxx

```
:%s/^/xxx/g
```

行尾插入，xxx

```
:%s/$/xxx/g
```

所有替换命令末尾加上c，每个替换都将需要用户确认。 如：%s/old/new/gc，加上i则忽略大小写(ignore)。

# 替换+执行命令

还有一种比替换更灵活的方式，它是匹配到某个模式后执行某种命令，
语法为

```
 :[range]g/pattern/command
```

例如：表示对于以一个空格和xyz开头的行执行normal模式下的dd命令。

```
:%g/^ xyz/normal dd
```



关于range的规定为：

如果不指定range，则表示当前行。
`m,n` : 从m行到n行。
`0` : 最开始一行（可能是这样）。
`$` : 最后一行
`.` : 当前行